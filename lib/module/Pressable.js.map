{"version":3,"names":["React","useCallback","useState","Animated","Easing","Platform","Pressable","RNPressable","StyleSheet","View","chroma","usePaletteColor","_ref","pressEffect","select","android","web","default","pressEffectColor","onLayout","onPressIn","onPressOut","onFocus","onBlur","android_ripple","onMouseEnter","onMouseLeave","children","rest","main","color","size","setSize","width","height","ripples","setRipples","handleLayout","event","nativeEvent","layout","pressed","setPressed","handlePressIn","locationX","locationY","x","y","scale","Value","opacity","ripple","key","Date","now","Math","random","style","start","top","transform","prevState","timing","toValue","max","abs","easing","out","ease","duration","useNativeDriver","handlePressOut","length","slice","focused","setFocused","handleFocus","handleBlur","hovered","setHovered","handleMouseEnter","handleMouseLeave","createElement","_extends","alpha","hex","undefined","absoluteFill","backgroundColor","disabled","transition","styles","effectContainer","map","create","overflow","position","borderRadius"],"sources":["Pressable.tsx"],"sourcesContent":["import React, { useCallback, useState } from 'react';\nimport {\n  Animated,\n  Easing,\n  GestureResponderEvent,\n  LayoutChangeEvent,\n  NativeSyntheticEvent,\n  Platform,\n  Pressable as RNPressable,\n  PressableProps as RNPressableProps,\n  StyleSheet,\n  TargetedEvent,\n  View,\n} from 'react-native';\nimport chroma from 'chroma-js';\nimport { Color, usePaletteColor } from './hooks/use-palette-color';\n\nexport interface PressableProps extends RNPressableProps {\n  pressEffect?: 'none' | 'highlight' | 'ripple' | 'android-ripple';\n\n  pressEffectColor?: Color;\n\n  onMouseEnter?: (event: NativeSyntheticEvent<TargetedEvent>) => void;\n\n  onMouseLeave?: (event: NativeSyntheticEvent<TargetedEvent>) => void;\n\n  style?: any;\n}\n\nconst Pressable: React.FC<PressableProps> = ({\n  pressEffect = Platform.select({ android: 'android-ripple', web: 'ripple', default: 'highlight' }),\n  pressEffectColor = 'on-background',\n  onLayout,\n  onPressIn,\n  onPressOut,\n  onFocus,\n  onBlur,\n  android_ripple,\n  onMouseEnter,\n  onMouseLeave,\n  children,\n  ...rest\n}) => {\n  const { main: color } = usePaletteColor(pressEffectColor);\n\n  const [size, setSize] = useState({ width: 0, height: 0 });\n\n  const [ripples, setRipples] = useState<{ key: string; style: any }[]>([]);\n\n  const handleLayout = useCallback(\n    (event: LayoutChangeEvent) => {\n      const { width, height } = event.nativeEvent.layout;\n      setSize({ width, height });\n      onLayout?.(event);\n    },\n    [onLayout]\n  );\n\n  const [pressed, setPressed] = useState(false);\n\n  const handlePressIn = useCallback(\n    (event: GestureResponderEvent) => {\n      setPressed(true);\n      onPressIn?.(event);\n\n      if (pressEffect === 'ripple') {\n        const { locationX, locationY } = event.nativeEvent;\n\n        const x = (locationX ?? size.width / 2) - 0.5;\n        const y = (locationY ?? size.height / 2) - 0.5;\n\n        const scale = new Animated.Value(0);\n        const opacity = new Animated.Value(1);\n\n        const ripple = {\n          key: `${Date.now() + Math.random()}`,\n          style: { start: x, top: y, transform: [{ scale }], opacity },\n        };\n\n        setRipples((prevState) => [...prevState, ripple]);\n\n        Animated.timing(scale, {\n          toValue: Math.max(\n            size.width * 1.25 + Math.abs(size.width / 2 - x) * 2,\n            size.height * 1.25 + Math.abs(size.height / 2 - y) * 2\n          ),\n          easing: Easing.out(Easing.ease),\n          duration: 400,\n          useNativeDriver: false,\n        }).start();\n      }\n    },\n    [onPressIn, pressEffect, size]\n  );\n\n  const handlePressOut = useCallback(\n    (event: GestureResponderEvent) => {\n      setPressed(false);\n      onPressOut?.(event);\n\n      if (pressEffect === 'ripple' && ripples.length) {\n        Animated.timing(ripples[ripples.length - 1].style.opacity, {\n          toValue: 0,\n          easing: Easing.out(Easing.ease),\n          duration: 400,\n          useNativeDriver: false,\n        }).start(() => {\n          setRipples((prevState) => prevState.slice(1));\n        });\n      }\n    },\n    [pressEffect, ripples, onPressOut]\n  );\n\n  const [focused, setFocused] = useState(false);\n\n  const handleFocus = useCallback(\n    (event: NativeSyntheticEvent<TargetedEvent>) => {\n      setFocused(true);\n      onFocus?.(event);\n    },\n    [onFocus]\n  );\n\n  const handleBlur = useCallback(\n    (event: NativeSyntheticEvent<TargetedEvent>) => {\n      setFocused(false);\n      onBlur?.(event);\n    },\n    [onBlur]\n  );\n\n  const [hovered, setHovered] = useState(false);\n\n  const handleMouseEnter = useCallback(\n    (event: NativeSyntheticEvent<TargetedEvent>) => {\n      setHovered(true);\n      onMouseEnter?.(event);\n    },\n    [onMouseEnter]\n  );\n\n  const handleMouseLeave = useCallback(\n    (event: NativeSyntheticEvent<TargetedEvent>) => {\n      setHovered(false);\n      onMouseLeave?.(event);\n    },\n    [onMouseLeave]\n  );\n\n  return (\n    <RNPressable\n      android_ripple={\n        pressEffect === 'android-ripple' ? android_ripple ?? { color: chroma(color).alpha(0.26).hex() } : undefined\n      }\n      onLayout={handleLayout}\n      onPressIn={handlePressIn}\n      onPressOut={handlePressOut}\n      onFocus={handleFocus}\n      onBlur={handleBlur}\n      {...({ onMouseEnter: handleMouseEnter, onMouseLeave: handleMouseLeave } as any)}\n      {...rest}\n    >\n      <View\n        style={[\n          StyleSheet.absoluteFill,\n          {\n            backgroundColor: hovered && !rest.disabled ? chroma(color).alpha(0.04).hex() : 'transparent',\n          },\n          { transition: 'background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms' } as any,\n        ]}\n      />\n\n      {focused && !rest.disabled && (\n        <View style={[StyleSheet.absoluteFill, { backgroundColor: chroma(color).alpha(0.12).hex() }]} />\n      )}\n\n      {pressEffect === 'highlight' && pressed && (\n        <View style={[StyleSheet.absoluteFill, { backgroundColor: chroma(color).alpha(0.26).hex() }]} />\n      )}\n\n      {pressEffect === 'ripple' && ripples.length !== 0 && (\n        <View style={[StyleSheet.absoluteFill, styles.effectContainer]}>\n          {ripples.map((ripple) => (\n            <Animated.View\n              key={ripple.key}\n              style={[styles.ripple, { backgroundColor: chroma(color).alpha(0.1).hex() }, ripple.style]}\n            />\n          ))}\n        </View>\n      )}\n\n      {children}\n    </RNPressable>\n  );\n};\n\nconst styles = StyleSheet.create({\n  effectContainer: {\n    overflow: 'hidden',\n  },\n  ripple: {\n    position: 'absolute',\n    width: 1,\n    height: 1,\n    borderRadius: 0.5,\n  },\n});\n\nexport default Pressable;\n"],"mappings":"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"}