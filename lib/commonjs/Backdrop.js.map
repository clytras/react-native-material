{"version":3,"names":["_react","_interopRequireWildcard","require","_reactNative","_Surface","_interopRequireDefault","_useStyles","obj","__esModule","default","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","Backdrop","_ref","revealed","header","headerHeight","backLayer","backLayerHeight","subheader","subheaderHeight","style","headerContainerStyle","backLayerContainerStyle","frontLayerContainerStyle","subheaderContainerStyle","children","currentHeaderHeight","setCurrentHeaderHeight","useState","currentBackLayerHeight","setCurrentBackLayerHeight","currentSubheaderHeight","setCurrentSubheaderHeight","styles","useStyles","_ref2","palette","container","flex","backgroundColor","primary","main","overflow","frontLayer","position","start","end","bottom","surface","borderTopStartRadius","borderTopEndRadius","borderBottomStartRadius","borderBottomEndRadius","elevation","animated","useRef","Animated","Value","current","useEffect","timing","toValue","duration","useNativeDriver","dimensions","useWindowDimensions","translateY","interpolate","inputRange","outputRange","height","createElement","View","onLayout","e","nativeEvent","layout","top","transform","_default","exports"],"sources":["Backdrop.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport { Animated, StyleProp, useWindowDimensions, View, ViewProps, ViewStyle } from 'react-native';\nimport Surface from './Surface';\nimport { useStyles } from './hooks/use-styles';\n\nexport interface BackdropProps {\n  revealed?: boolean;\n\n  header?: React.ReactElement | null;\n\n  headerHeight?: number;\n\n  backLayer?: React.ReactElement | null;\n\n  backLayerHeight?: number;\n\n  subheader?: React.ReactElement | null;\n\n  subheaderHeight?: number;\n\n  style?: StyleProp<ViewStyle>;\n\n  headerContainerStyle?: StyleProp<ViewStyle>;\n\n  backLayerContainerStyle?: StyleProp<ViewStyle>;\n\n  frontLayerContainerStyle?: Animated.AnimatedProps<ViewProps>['style'];\n\n  subheaderContainerStyle?: StyleProp<ViewStyle>;\n}\n\nconst Backdrop: React.FC<BackdropProps> = ({\n  revealed = false,\n  header,\n  headerHeight,\n  backLayer,\n  backLayerHeight,\n  subheader,\n  subheaderHeight,\n  style,\n  headerContainerStyle,\n  backLayerContainerStyle,\n  frontLayerContainerStyle,\n  subheaderContainerStyle,\n  children,\n}) => {\n  const [currentHeaderHeight, setCurrentHeaderHeight] = useState(headerHeight ?? 0);\n  const [currentBackLayerHeight, setCurrentBackLayerHeight] = useState(backLayerHeight ?? 0);\n  const [currentSubheaderHeight, setCurrentSubheaderHeight] = useState(subheaderHeight ?? 0);\n\n  const styles = useStyles(({ palette }) => ({\n    container: {\n      flex: 1,\n      backgroundColor: palette.primary.main,\n      overflow: 'hidden',\n    },\n    frontLayer: {\n      position: 'absolute',\n      start: 0,\n      end: 0,\n      bottom: 0,\n      backgroundColor: palette.surface.main,\n      borderTopStartRadius: 16,\n      borderTopEndRadius: 16,\n      borderBottomStartRadius: 0,\n      borderBottomEndRadius: 0,\n      elevation: 1,\n    },\n  }));\n\n  const animated = useRef(new Animated.Value(revealed ? 1 : 0)).current;\n\n  useEffect(() => {\n    Animated.timing(animated, {\n      toValue: revealed ? 1 : 0,\n      duration: 300,\n      useNativeDriver: true,\n    }).start();\n  }, [revealed]);\n\n  const dimensions = useWindowDimensions();\n\n  const translateY = animated.interpolate({\n    inputRange: [0, 1],\n    outputRange: [\n      0,\n      dimensions.height < currentHeaderHeight + currentBackLayerHeight\n        ? dimensions.height - currentHeaderHeight - currentSubheaderHeight\n        : currentBackLayerHeight,\n    ],\n  });\n\n  return (\n    <View style={[styles.container, style]}>\n      <View\n        style={[headerContainerStyle, { height: headerHeight }]}\n        onLayout={(e) => {\n          if (!headerHeight) setCurrentHeaderHeight(e.nativeEvent.layout.height);\n        }}\n      >\n        {header}\n      </View>\n\n      <View\n        style={[backLayerContainerStyle, { height: backLayerHeight }]}\n        onLayout={(e) => {\n          if (!backLayerHeight) setCurrentBackLayerHeight(e.nativeEvent.layout.height);\n        }}\n      >\n        {backLayer}\n      </View>\n\n      <Surface\n        style={[styles.frontLayer, { top: currentHeaderHeight, transform: [{ translateY }] }, frontLayerContainerStyle]}\n      >\n        {subheader && (\n          <View\n            style={[subheaderContainerStyle, { height: subheaderHeight }]}\n            onLayout={(e) => {\n              if (!subheaderHeight) setCurrentSubheaderHeight(e.nativeEvent.layout.height);\n            }}\n          >\n            {subheader}\n          </View>\n        )}\n\n        {children}\n      </Surface>\n    </View>\n  );\n};\n\nexport default Backdrop;\n"],"mappings":"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"}